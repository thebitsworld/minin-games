{"version":3,"sources":["SuccessUI.js"],"names":["SNS","require","G","sdkConfig","cc","Class","extends","Component","properties","scoreLabel","Label","maxscoreLabel","overEffect","AudioClip","addCoin","btnEffect","bencidefen_but_01","Node","onLoad","createBannerAd","audioEngine","playEffect","string","game","gametime","runSDK","sdk_key_xiaomi","active","sdk_key_oppo","sdk_key_vivo","start","window","wx","submit","lv","user","star","log","postMessage","messageType","MAIN_MENU_NUM","next","hideAD","director","loadScene","share","shareLocal","tempfire","Tip","show","home"],"mappings":"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","file":"SuccessUI.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\Game","sourcesContent":["// var Colors = require(\"Colors\");\r\nvar SNS = require(\"SNS\");\r\nvar G = require(\"G\");\r\nvar sdkConfig = require(\"PolySDK\").sdkConfig;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // gameText:{\r\n        //     default:null,\r\n        //     type:cc.Node\r\n        // },\r\n        // textLabel:{\r\n        //     default:null,\r\n        //     type:cc.Label\r\n        // },\r\n        scoreLabel: cc.Label,\r\n        maxscoreLabel: cc.Label,\r\n        overEffect: cc.AudioClip,\r\n        addCoin: cc.AudioClip,\r\n        btnEffect: cc.AudioClip,\r\n        bencidefen_but_01 :cc.Node,\r\n        // score:0,\r\n        // changeScore:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        SNS.createBannerAd();\r\n        // 背景层\r\n        // this.bg.width = cc.winSize.width;\r\n        // this.bg.height = cc.winSize.height;\r\n        // this.bg.setPosition(this.bg.width/2,this.bg.height/2);\r\n        // this.bg.color = Colors.overBg;\r\n        // 文字层\r\n        // this.gameText.setPosition(cc.winSize.width/2,cc.winSize.height/2);\r\n        // var action = cc.repeatForever(cc.sequence(cc.scaleTo(1, 1.5),cc.scaleTo(1,1)));\r\n        // this.gameText.runAction(action);\r\n        // 播放结束音效\r\n        cc.audioEngine.playEffect(this.overEffect);\r\n        // 分数\r\n        // this.scoreText.setPosition(this.gameText.x,this.gameText.y+200);\r\n        // this.score = G.score;\r\n        // this.schedule(this.updateScore,0.1,cc.REPEAT_FOREVER,2);\r\n        // 点击分数立即加到最高分数\r\n        // var self = this;\r\n        // this.bg.on(cc.Node.EventType.TOUCH_START,function(event){\r\n        //     cc.log(\"score text touch\");\r\n        //     cc.audioEngine.playEffect(self.addCoin);\r\n        //     self.changeScore = self.score;\r\n        //     self.scoreLabel.string = \"最终分数：\"+self.changeScore;\r\n        // }, this.bg);\r\n        // 返回按钮\r\n        // this.backBtn.setPosition(this.gameText.x,this.gameText.y-200);\r\n        this.scoreLabel.string = \"\" + G.game.gametime;\r\n        this.maxscoreLabel.string = \"历史最高分:\" + G.game.gametime;\r\n        cc.audioEngine.playEffect(this.addCoin);\r\n        if(sdkConfig.runSDK == sdkConfig.sdk_key_xiaomi){\r\n            this.bencidefen_but_01.active = false;\r\n        }\r\n\r\n        if(sdkConfig.runSDK == sdkConfig.sdk_key_oppo){\r\n            this.bencidefen_but_01.active = false;\r\n        }\r\n\r\n        if(sdkConfig.runSDK == sdkConfig.sdk_key_vivo){\r\n            this.bencidefen_but_01.active = false;\r\n        }\r\n\r\n    },\r\n\r\n\r\n    start() {\r\n\r\n        if (window.wx) {\r\n\r\n\r\n            SNS.submit(G.lv, G.game.gametime);\r\n            SNS.submit(\"a\", G.user.star);\r\n\r\n\r\n            // cc.log(\"提交分数\");\r\n            // wx.postMessage({\r\n            //     messageType: 3,\r\n            //     MAIN_MENU_NUM: \"a\",\r\n            //     score: G.game.score,\r\n            // });\r\n            cc.log(\"显示横向排行榜\");\r\n            wx.postMessage({\r\n                messageType: 4,\r\n                MAIN_MENU_NUM: G.lv,\r\n            });\r\n        }\r\n    },\r\n    // updateScore() {\r\n    //     if (this.score <= this.changeScore) {\r\n    //         this.unschedule(this.updateScore);\r\n    //     }\r\n    //     this.changeScore += 20;\r\n    //     this.changeScore = this.changeScore > this.score ? this.score : this.changeScore;\r\n    //     // 添加音效\r\n    //     cc.audioEngine.playEffect(this.addCoin);\r\n\r\n    // },\r\n\r\n\r\n    next() {\r\n        SNS.hideAD();\r\n        G.lv = G.user.lv;\r\n\r\n        cc.director.loadScene(\"Game\");\r\n    },\r\n    share() {\r\n        cc.log(\"开启分享\");\r\n        SNS.shareLocal(\"快来帮我一下~\", () => {\r\n             G.tempfire = 5;\r\n            // SNS.hidebbs();\r\n             cc.director.loadScene(\"Game\");\r\n        }, () => {\r\n\r\n            G.Tip.show(\"分享失败\");\r\n        });\r\n    },\r\n    home() {\r\n        SNS.hideAD();\r\n        cc.audioEngine.playEffect(this.btnEffect);\r\n        cc.director.loadScene(\"Home\");\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});"]}