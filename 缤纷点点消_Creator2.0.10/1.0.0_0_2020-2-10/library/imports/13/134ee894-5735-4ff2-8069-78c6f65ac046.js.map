{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\Common/assets\\script\\Common\\APPS.js"],"names":["G","require","cc","Class","extends","Component","properties","excludeName","onLoad","APPS","prefab","node","children","removeAllChildren","start","init","i","netConfig","wx","apps","app","name","instantiate","getChildByName","getComponent","Label","string","icon","Sprite","loader","load","err","texture","spriteFrame","SpriteFrame","on","jump","parent","e","error","navigateToMiniProgram","appId","envVersion","success","res"],"mappings":";;;;;;AAAA,IAAIA,IAAIC,QAAQ,GAAR,CAAR;AACAC,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;;AAIVC,iBAAa,EAJH,CAIM;;AAEhB;;AANU,GAHL;;AAaP;;AAEAC,QAfO,oBAeE;AACPR,MAAES,IAAF,GAAO,IAAP;AACA,SAAKC,MAAL,GAAc,KAAKC,IAAL,CAAUC,QAAV,CAAmB,CAAnB,CAAd;AACA,SAAKD,IAAL,CAAUE,iBAAV;AAED,GApBM;AAsBPC,OAtBO,mBAsBC,CACP,CAvBM;AAyBPC,MAzBO,kBAyBA;AAAA;;AAGL,SAAK,IAAIC,CAAT,IAAchB,EAAEiB,SAAF,CAAYC,EAAZ,CAAeC,IAA7B,EAAmC;;AAEjC,UAAI;AAAA;AACF,cAAIC,MAAMpB,EAAEiB,SAAF,CAAYC,EAAZ,CAAeC,IAAf,CAAoBH,CAApB,CAAV;AACA,cAAII,IAAIC,IAAJ,IAAY,MAAKd,WAArB,EAAkC;AAChC;AACD;;AAED,cAAII,OAAOT,GAAGoB,WAAH,CAAe,MAAKZ,MAApB,CAAX;;AAEAC,eAAKY,cAAL,CAAoB,WAApB,EAAiCC,YAAjC,CAA8CtB,GAAGuB,KAAjD,EAAwDC,MAAxD,GAAiEN,IAAIC,IAAJ,GAAW,EAA5E;;AAEA,cAAIM,OAAOhB,KAAKY,cAAL,CAAoB,MAApB,EAA4BC,YAA5B,CAAyCtB,GAAG0B,MAA5C,CAAX;;AAGA1B,aAAG2B,MAAH,CAAUC,IAAV,CAAeV,IAAIO,IAAnB,EAAyB,UAAUI,GAAV,EAAeC,OAAf,EAAwB;AAC/CL,iBAAKM,WAAL,GAAmB,IAAI/B,GAAGgC,WAAP,CAAmBF,OAAnB,CAAnB;AACD,WAFD;;AAIArB,eAAKwB,EAAL,CAAQ,YAAR,EAAsB,YAAM;AAC1B,kBAAKC,IAAL,CAAUhB,GAAV;AACD,WAFD;;AAKAT,eAAK0B,MAAL,GAAc,MAAK1B,IAAnB;AAtBE;;AAAA,iCAGA;AAqBH,OAxBD,CAwBE,OAAO2B,CAAP,EAAU;AACVpC,WAAGqC,KAAH,CAASD,CAAT;AACD;AAEF;AAEF,GA5DM;AA8DPF,MA9DO,gBA8DFhB,GA9DE,EA8DG;;AAERF,OAAGsB,qBAAH,CAAyB;AACvBC,aAAOrB,IAAIqB,KADY;AAEvBC,kBAAY,SAFW;AAGvBC,aAHuB,mBAGfC,GAHe,EAGV;AACX;AACD;AALsB,KAAzB;AAQD;AAxEM;;AA0EP;AA1EF","file":"APPS.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\Common","sourcesContent":["var G = require(\"G\");\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n\r\n\r\n\r\n    excludeName: \"\",//排除掉的app名称\r\n\r\n    // jsonUrl:\"https://www.77xyz.xyz/gameres/apps/apps.json\",\r\n\r\n  },\r\n\r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad() {\r\n    G.APPS=this;\r\n    this.prefab = this.node.children[0];\r\n    this.node.removeAllChildren();\r\n\r\n  },\r\n\r\n  start() {\r\n  },\r\n\r\n  init() {\r\n\r\n\r\n    for (let i in G.netConfig.wx.apps) {\r\n\r\n      try {\r\n        let app = G.netConfig.wx.apps[i];\r\n        if (app.name == this.excludeName) {\r\n          continue;\r\n        }\r\n\r\n        let node = cc.instantiate(this.prefab);\r\n\r\n        node.getChildByName(\"nameLabel\").getComponent(cc.Label).string = app.name + \"\";\r\n\r\n        let icon = node.getChildByName(\"icon\").getComponent(cc.Sprite);\r\n\r\n\r\n        cc.loader.load(app.icon, function (err, texture) {\r\n          icon.spriteFrame = new cc.SpriteFrame(texture);\r\n        });\r\n\r\n        node.on(\"touchstart\", () => {\r\n          this.jump(app);\r\n        });\r\n\r\n\r\n        node.parent = this.node;\r\n\r\n      } catch (e) {\r\n        cc.error(e);\r\n      }\r\n\r\n    }\r\n\r\n  },\r\n\r\n  jump(app) {\r\n\r\n    wx.navigateToMiniProgram({\r\n      appId: app.appId,\r\n      envVersion: 'release',\r\n      success(res) {\r\n        // 打开成功\r\n      }\r\n    })\r\n\r\n  },\r\n\r\n  // update (dt) {},\r\n});\r\n"]}